{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\.gemini\\\\antigravity\\\\scratch\\\\mepass-clone\\\\client\\\\src\\\\context\\\\CityContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000/api';\nconst CityContext = /*#__PURE__*/createContext();\nexport const useCity = () => {\n  _s();\n  const context = useContext(CityContext);\n  if (!context) {\n    throw new Error('useCity must be used within a CityProvider');\n  }\n  return context;\n};\n_s(useCity, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CityProvider = ({\n  children\n}) => {\n  _s2();\n  const [selectedCity, setSelectedCity] = useState(localStorage.getItem('mepass_city') || null);\n  const [cities, setCities] = useState([]);\n  const [showCityModal, setShowCityModal] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchCities();\n  }, []);\n  useEffect(() => {\n    if (!loading && !selectedCity && Array.isArray(cities) && cities.length > 0) {\n      setShowCityModal(true);\n    }\n  }, [loading, selectedCity, cities]);\n  const fetchCities = async () => {\n    try {\n      var _res$data;\n      const res = await axios.get(`${API_URL}/cities`);\n      setCities(((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.cities) || []);\n    } catch (error) {\n      console.error('Failed to fetch cities:', error);\n      setCities([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const selectCity = cityName => {\n    setSelectedCity(cityName);\n    localStorage.setItem('mepass_city', cityName);\n    setShowCityModal(false);\n  };\n  const openCityModal = () => {\n    setShowCityModal(true);\n  };\n  const closeCityModal = () => {\n    if (selectedCity) {\n      setShowCityModal(false);\n    }\n  };\n  const value = {\n    selectedCity,\n    cities,\n    loading,\n    showCityModal,\n    selectCity,\n    openCityModal,\n    closeCityModal\n  };\n  return /*#__PURE__*/_jsxDEV(CityContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n_s2(CityProvider, \"cSUHBHXS1X6KbnLt9CAG/MbUj68=\");\n_c = CityProvider;\nexport default CityContext;\nvar _c;\n$RefreshReg$(_c, \"CityProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","API_URL","CityContext","useCity","_s","context","Error","CityProvider","children","_s2","selectedCity","setSelectedCity","localStorage","getItem","cities","setCities","showCityModal","setShowCityModal","loading","setLoading","fetchCities","Array","isArray","length","_res$data","res","get","data","error","console","selectCity","cityName","setItem","openCityModal","closeCityModal","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/.gemini/antigravity/scratch/mepass-clone/client/src/context/CityContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\nconst CityContext = createContext();\r\n\r\nexport const useCity = () => {\r\n    const context = useContext(CityContext);\r\n    if (!context) {\r\n        throw new Error('useCity must be used within a CityProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const CityProvider = ({ children }) => {\r\n    const [selectedCity, setSelectedCity] = useState(\r\n        localStorage.getItem('mepass_city') || null\r\n    );\r\n    const [cities, setCities] = useState([]);\r\n    const [showCityModal, setShowCityModal] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchCities();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!loading && !selectedCity && Array.isArray(cities) && cities.length > 0) {\r\n            setShowCityModal(true);\r\n        }\r\n    }, [loading, selectedCity, cities]);\r\n\r\n    const fetchCities = async () => {\r\n        try {\r\n            const res = await axios.get(`${API_URL}/cities`);\r\n            setCities(res.data?.cities || []);\r\n        } catch (error) {\r\n            console.error('Failed to fetch cities:', error);\r\n            setCities([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const selectCity = (cityName) => {\r\n        setSelectedCity(cityName);\r\n        localStorage.setItem('mepass_city', cityName);\r\n        setShowCityModal(false);\r\n    };\r\n\r\n    const openCityModal = () => {\r\n        setShowCityModal(true);\r\n    };\r\n\r\n    const closeCityModal = () => {\r\n        if (selectedCity) {\r\n            setShowCityModal(false);\r\n        }\r\n    };\r\n\r\n    const value = {\r\n        selectedCity,\r\n        cities,\r\n        loading,\r\n        showCityModal,\r\n        selectCity,\r\n        openCityModal,\r\n        closeCityModal\r\n    };\r\n\r\n    return (\r\n        <CityContext.Provider value={value}>\r\n            {children}\r\n        </CityContext.Provider>\r\n    );\r\n};\r\n\r\nexport default CityContext;\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,OAAO,GAAG,2BAA2B;AAE3C,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMS,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,OAAO,GAAGV,UAAU,CAACO,WAAW,CAAC;EACvC,IAAI,CAACG,OAAO,EAAE;IACV,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EACjE;EACA,OAAOD,OAAO;AAClB,CAAC;AAACD,EAAA,CANWD,OAAO;AAQpB,OAAO,MAAMI,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC1C,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAC5CgB,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,IAC3C,CAAC;EACD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACoB,aAAa,EAAEC,gBAAgB,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACsB,OAAO,EAAEC,UAAU,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACZuB,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAENvB,SAAS,CAAC,MAAM;IACZ,IAAI,CAACqB,OAAO,IAAI,CAACR,YAAY,IAAIW,KAAK,CAACC,OAAO,CAACR,MAAM,CAAC,IAAIA,MAAM,CAACS,MAAM,GAAG,CAAC,EAAE;MACzEN,gBAAgB,CAAC,IAAI,CAAC;IAC1B;EACJ,CAAC,EAAE,CAACC,OAAO,EAAER,YAAY,EAAEI,MAAM,CAAC,CAAC;EAEnC,MAAMM,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MAAA,IAAAI,SAAA;MACA,MAAMC,GAAG,GAAG,MAAM3B,KAAK,CAAC4B,GAAG,CAAC,GAAGzB,OAAO,SAAS,CAAC;MAChDc,SAAS,CAAC,EAAAS,SAAA,GAAAC,GAAG,CAACE,IAAI,cAAAH,SAAA,uBAARA,SAAA,CAAUV,MAAM,KAAI,EAAE,CAAC;IACrC,CAAC,CAAC,OAAOc,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/Cb,SAAS,CAAC,EAAE,CAAC;IACjB,CAAC,SAAS;MACNI,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAMW,UAAU,GAAIC,QAAQ,IAAK;IAC7BpB,eAAe,CAACoB,QAAQ,CAAC;IACzBnB,YAAY,CAACoB,OAAO,CAAC,aAAa,EAAED,QAAQ,CAAC;IAC7Cd,gBAAgB,CAAC,KAAK,CAAC;EAC3B,CAAC;EAED,MAAMgB,aAAa,GAAGA,CAAA,KAAM;IACxBhB,gBAAgB,CAAC,IAAI,CAAC;EAC1B,CAAC;EAED,MAAMiB,cAAc,GAAGA,CAAA,KAAM;IACzB,IAAIxB,YAAY,EAAE;MACdO,gBAAgB,CAAC,KAAK,CAAC;IAC3B;EACJ,CAAC;EAED,MAAMkB,KAAK,GAAG;IACVzB,YAAY;IACZI,MAAM;IACNI,OAAO;IACPF,aAAa;IACbc,UAAU;IACVG,aAAa;IACbC;EACJ,CAAC;EAED,oBACIlC,OAAA,CAACE,WAAW,CAACkC,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAA3B,QAAA,EAC9BA;EAAQ;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAAC/B,GAAA,CA7DWF,YAAY;AAAAkC,EAAA,GAAZlC,YAAY;AA+DzB,eAAeL,WAAW;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}